# JVM学习

视频学习地址:[https://www.bilibili.com/video/BV1yE411Z7AP?vd_source=737bc72ddc8b0e9190302e61a877a9d8](https://www.bilibili.com/video/BV1yE411Z7AP?p=1&vd_source=737bc72ddc8b0e9190302e61a877a9d8)



## JVM概览

### 1. JVM定义

JVM是java **Virtual Machine java**的运行时环境(**Java 字节码的运行环境**)

### 2. JVM好处

- **一次**编写,**到处**运行
- **自动内存管理**,**垃圾回收机制**
- **数组越界检查**(如果没有可能会更改其他地方的数据)
- 多态



![image-20220718093536862](https://s2.loli.net/2022/07/18/5yPwYSsg7GiFCEQ.png)



### 3. JVM的组成

![image-20220718093905544](https://s2.loli.net/2022/07/18/1qtopOh3JITkH7z.png)

1. 程序编译成java的二进制字节码后经过ClassLoader类加载器加载到JVM中运行
2. 程序中的类放在方法区,类创建的实例和对象放在堆中,对象调用方法时用到虚拟机栈,程序计数器和本地方法栈
3. 方法执行时,每行代码由Interpreter解释器逐行执行,方法中频繁调用的代码使用即时编译器进行优化,
4. GC会对堆中不再应用的对象进行垃圾回收
5. 本地方法接口是操作系统中的一些方法



## 程序计数器

### 1. 程序计数器作用

程序计数器就是在执行每条语句的时候记录下一条指令的地址,物理上是通过寄存器实现的

![image-20220718102440409](https://s2.loli.net/2022/07/18/rEkPq1HKTMbc7Xf.png)



### 2. 程序计数器特点

1. 线程**私有**,每**一个线程**都有一个**属于自己**的**独立计数器**
2. 唯一一个**不会出现内存溢出**问题



## 虚拟机栈

### 1. 虚拟机栈的定义

1. 每一个**线程运行时需要的内存空间**,就是一个虚拟机栈
2. 每个栈中有多个**栈帧**,代表**每个方法所需要的内存**,,栈帧进入时根据方法调用,如a方法中调用了b方法,那么a先进栈,b再进栈
3. 每**一个线程**只能有**一个活动栈帧**,代表当前**线程执行的方法**



